<div layout="row" ng-show="userMembership()==1 || user.privileges>0" style="height:100%">
  <md-content-flex flex="20" style="position:relative; background-color:gray">
  	  <md-button ng-click="showNotifications('left')" ng-show="!isNotificationsOpened('left')">
	  	Left sidebar
	  </md-button>
 	  <md-subheader class="md-no-sticky">Rooms</md-subheader>
 	  <md-button ng-click="newRoom($event)" style="background-color:greenyellow">
	  	New room
	  </md-button>
	  <md-list-item ng-click="register(room, $event)" ng-repeat="room in rooms | filter: {team : team.id}">
	    <md-icon class="material-icons">
	    	<span ng-show="room.privateRoom==0">brightness_1</span>
	    	<span ng-show="room.privateRoom==1">stars</span>
	    </md-icon>
	    <p> {{ room.name }}</p>
	    <md-icon ng-show="user.privileges>0 || participateUser.teamPrivileges>0 || room.creator==user.id" ng-class="{'md-primary': person.newMessage}" ng-click="deleteRoom(room, $event)" aria-label="Delete room" class="material-icons md-secondary md-hue-3" style="color: blue;">clear</md-icon>
	  	<md-divider ng-if="!$last"></md-divider>
	  </md-list-item>
	  <md-subheader class="md-no-sticky">Members</md-subheader>
	  <md-list-item class="md-2-line" ng-repeat="user in teamUsers()">
	        <div class="md-list-item-text">
	          <p>{{ user.name }}</p>
	        </div>
      </md-list-item>
      <md-button ng-click="invitePeople($event)" ng-show="participateUser.teamPrivileges>0" style="background-color:greenyellow">
	  	Invite people
	  </md-button>     
      <md-button ng-show="participateUser.teamPrivileges<2" ng-click="leaveTeam($event)" style="background-color:greenyellow">
	   	Leave team
	  </md-button>
	  <a ng-href="#/team/{{team.id}}/admin">
		  <md-button ng-show="user.privileges>0 || participateUser.teamPrivileges==2" style="background-color:purple">
		   	Admin panel
		  </md-button>
	  </a>
	  <md-button ng-click="showPrivateMessages()">
	   	Private messages
	  </md-button>
  </md-content-flex>
  
  <div flex>
  		<div ng-show="screen=='privateMessages'">
  			Private Messages
  			<md-button ng-click="showMainScreen()" class="md-icon-button" aria-label="Close">
		        <md-icon class="material-icons">close</md-icon>
		     </md-button>
  			<p>Last conversations</p>
  			<md-list-item ng-repeat="user in filterMessagesContacts()" ng-click="showUserMessages(user)">
  				 <md-list-item class="md-2-line">
  				 	<ng-letter-avatar data="{{findUserById(user).name}}" shape="round"></ng-letter-avatar>
  				 <div class="md-list-item-text">
  				 	<h3>{{findUserById(user).name}}</h3>
  				 </div>
		       <md-divider ng-if="!$last"></md-divider>
				</md-list-item>
  			</md-list-item>
			<div class="md-block">
			 		
		<form ng-submit="newPrivateMessage()">
			<md-input-container md-no-float>
						<input ng-model="privateMessage" type="text" placeholder="New message" required>
			</md-input-container>
		    <md-autocomplete
		        md-no-cache="noCache"
		        md-selected-item="receiver"
		        md-search-text-change="searchTextChange(searchText)"
		        md-search-text="searchText"
		        md-selected-item-change="selectedItemChange(user)"
		        md-items="user in querySearch(searchText)"
		        md-item-text="user.name"
		        md-min-length="0"
		        placeholder="Select receiver">
		       	<md-item-template>
		        	<span md-highlight-text="searchText" md-highlight-flags="^i">{{user.name}}</span>
		        </md-item-template>
		        <md-not-found>
		          There's no user with the name "{{searchText}}".
		        </md-not-found>
		      </md-autocomplete>    
				<md-button ng-show="privateMessage!='' && receiver.id" type="submit" class="md-primary">
						Send
				</md-button>
				<md-button ng-hide="privateMessage!='' && receiver.id" ng-disables="true" type="submit" class="md-primary">
						Send
				</md-button>
				</form>
			</div>  			  			
  		</div>
  		
  		<div ng-show="screen=='privateUserMessages'">
  			<md-button ng-click="showMainScreen()" class="md-icon-button" aria-label="Close">
		        <md-icon class="material-icons">close</md-icon>
		     </md-button>
  			<md-list-item ng-repeat="message in privateMessages() | filter:filterMessages">
					     <md-list-item class="md-2-line">
<!-- 						      <img ng-src="{{todos[0].face}}?20" class="md-avatar" alt="{{message.user}}" /> -->
						      <ng-letter-avatar data="{{findUserById(message.transmitter).name}}" shape="round"></ng-letter-avatar>
						      <div class="md-list-item-text">
						         <h3>{{findUserById(message.transmitter).name}}</h3>
						         <p>{{message.text}}</p>
						         <p>{{message.date}}</p>
						       </div>
						       <md-divider ng-if="!$last"></md-divider>
					      </md-list-item>
			 </md-list-item>
			 <form ng-submit="replyMessage(replyText)">
				 <md-input-container md-no-float>
							<input ng-model="replyText" type="text" placeholder="New message" required>
				</md-input-container>
				<md-button type="submit" class="md-primary">
					Send
				</md-button>
			</form>
  		</div>
  		
  		
  		<div ng-show="screen=='chat'" class="toggler">
			<div id="effect">
			 	<div>
			 		<strong>Team chat</strong>
			 	</div>
			    <div id="chatscroll" style="height: 30em;  overflow: scroll; overflow-x: hidden;">
			    
			    	<md-list-item ng-repeat="message in chatMessages | filter:{ team: team.id, room: 0 }">
					     <md-list-item class="md-2-line">
						      <ng-letter-avatar data="{{findUserById(message.user).name}}" shape="round"></ng-letter-avatar>
						      <div class="md-list-item-text">
						         <h3>{{findUserById(message.user).name}}</h3>
						         <p>{{message.text}}</p>
						         <p>{{message.date}}</p>
						       </div>
						       <md-divider ng-if="!$last"></md-divider>
					      </md-list-item>
					  </md-list-item>			
			        </div>
			        <div class="md-block">
			          		<form autocomplete="off" ng-submit="sendMessage()">
			                <md-input-container md-no-float>
					        	<input ng-model="chatMessage" type="text" placeholder="New message" required>
					        </md-input-container>
							<md-button type="submit" class="md-primary">
						  		Send
							</md-button>
							</form>
			           </div>
    			</div>
  			</div>
</div>
<md-sidenav class="md-sidenav-right md-whiteframe-z2" md-component-id="right">
      <md-toolbar class="md-theme-light">
        <h1 class="md-toolbar-tools">Notifications</h1>
      </md-toolbar>
      <md-content layout-padding>
      	<div ng-show="user.privileges>0 || participateUser.teamPrivileges>0">
      	User		Team
      		 <md-list-item ng-repeat="request in requests()">
    			<p> {{ request.user }} </p>
    			<p>{{ request.team}}</p>
    			<md-button class="md-icon-button" ng-click="acceptRequest(request)" title="Accept request" aria-label="Accept">
    				<i class="material-icons">check_circle</i>
    			</md-button>
    			<md-button class="md-icon-button" ng-click="denyRequest(request)" title="Deny request" aria-label="Deny">
    				<i class="material-icons">cancel</i>
    			</md-button>
 			 </md-list-item>
 			 </br>
 			 Room requests
 			 <md-list-item ng-repeat="request in roomRequests()">
    			<p> {{request.user}} </p>
    			<p>{{request.room}}</p>
    			<md-button class="md-icon-button" ng-click="acceptRoomRequest(request)" title="Accept request" aria-label="Accept">
    				<i class="material-icons">check_circle</i>
    			</md-button>
    			<md-button class="md-icon-button" ng-click="denyRoomRequest(request)" title="Deny request" aria-label="Deny">
    				<i class="material-icons">cancel</i>
    			</md-button>
 			 </md-list-item>
      	</div>
       Room invites
       <md-list-item ng-repeat="invitation in roomInvitations()">
    			<p> {{invitation.user}} </p>
    			<p>{{invitation.room}}</p>
    			<md-button class="md-icon-button" ng-click="acceptRoomInvitation(invitation)" title="Accept invitation" aria-label="Accept">
    				<i class="material-icons">check_circle</i>
    			</md-button>
    			<md-button class="md-icon-button" ng-click="denyRoomInvitation(invitation)" title="Deny invitation" aria-label="Deny">
    				<i class="material-icons">cancel</i>
    			</md-button>
 		</md-list-item>
        <md-button ng-click="close('right')" class="md-primary">
          Close Sidenav Right
        </md-button>
      </md-content>
    </md-sidenav>
    
    
    <md-sidenav layout="column" class="md-sidenav-left md-whiteframe-z2" md-component-id="left">
  <md-toolbar class="md-tall md-hue-2">
    <span flex></span>
    <div layout="column" class="md-toolbar-tools-bottom inset">
      <user-avatar>
			<ng-letter-avatar data="{{user.name}}" shape="round"></ng-letter-avatar>
      </user-avatar>
      <span></span>
      <div><span ng-bind="user.name"></span> </div>
      <div><span ng-bind="user.email"></span></div>
    </div>
  </md-toolbar>
  <md-list>
    <md-item ng-click="showPrivateMessages()">
        <md-item-content md-ink-ripple layout="row" layout-align="start center">
          <div class="inset">
            <ng-md-icon class="material-icons">message</ng-md-icon>
          </div>
          <div class="inset">Messages
          </div>
        </md-item-content>
    </md-item>
    <md-item ng-click="showNotifications('right')">
        <md-item-content md-ink-ripple layout="row" layout-align="start center">
          <div class="inset">
            <ng-md-icon class="material-icons">notifications</ng-md-icon>
          </div>
          <div class="inset">Notifications
          </div>
        </md-item-content>
    </md-item>
    <md-divider></md-divider>
    <md-subheader>Management</md-subheader>
    <md-item ng-repeat="item in admin">
      <a>
        <md-item-content md-ink-ripple layout="row" layout-align="start center">
          <div class="inset">
            <ng-md-icon class="material-icons">{{item.icon}}</ng-md-icon>
          </div>
          <div class="inset">{{item.title}}
          </div>
        </md-item-content>
      </a>
    </md-item>
  </md-list>
</md-sidenav>
    
    
    
</div>
<div ng-hide="userMembership()==1">
	You don't participate in this team.
</div>